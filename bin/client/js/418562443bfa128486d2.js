"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5990],{7113:(e,t,n)=>{var o,r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,u=void 0;try{for(var i,a=e[Symbol.iterator]();!(o=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){r=!0,u=e}finally{try{!o&&a.return&&a.return()}finally{if(r)throw u}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},u=n(2784),i=(o=n(5062))&&o.__esModule?o:{default:o},a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1170));n(1671);var c=n(3122);a.settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1,a.utils.skipHello();var l=a.Loader.shared;function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments[3],r=i.default.popup(Object.assign({offset:t.offset},n)).setLatLng(t.position).setContent(t.content).openOn(e);return o&&t.onClick&&r.on("remove",(function(){t.onClick(null)})),r}function f(e){var t=unescape(encodeURIComponent(e));return"data:image/svg+xml;base64,"+btoa(t)}t.Z=function(e){var t=e.markers,n=(0,u.useState)(null),o=r(n,2),d=o[0],p=o[1],v=(0,u.useState)(null),h=r(v,2),m=h[0],g=h[1],C=(0,u.useState)(null),y=r(C,2),w=y[0],k=y[1],x=(0,u.useState)(null),b=r(x,2),S=b[0],_=b[1],E=(0,u.useState)(null),I=r(E,2),O=I[0],A=I[1],L=(0,u.useState)(!1),M=r(L,2),R=M[0],P=M[1],T=(0,c.useLeafletMap)();return(0,u.useEffect)((function(){l.loading&&l.reset();var e=!1,n=!0,o=!1,r=void 0;try{for(var u,i=t[Symbol.iterator]();!(n=(u=i.next()).done);n=!0){var a=u.value,c=a.iconId||a.iconColor;!a.iconColor&&!a.iconId||l.resources["marker_"+c]||(e=!0,l.add("marker_"+c,a.customIcon?f(a.customIcon):f('<svg style="-webkit-filter: drop-shadow( 1px 1px 1px rgba(0, 0, 0, .4));filter: drop-shadow( 1px 1px 1px rgba(0, 0, 0, .4));" xmlns="http://www.w3.org/2000/svg" fill="'+a.iconColor+'" width="36" height="36" viewBox="0 0 24 24"><path d="M12 0c-4.198 0-8 3.403-8 7.602 0 6.243 6.377 6.903 8 16.398 1.623-9.495 8-10.155 8-16.398 0-4.199-3.801-7.602-8-7.602zm0 11c-1.657 0-3-1.343-3-3s1.342-3 3-3 3 1.343 3 3-1.343 3-3 3z"/></svg>')))}}catch(e){o=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(o)throw r}}R&&e&&P(!1),e?l.load((function(){return P(!0)})):P(!0)}),[t]),(0,u.useEffect)((function(){var e=new a.Container,t=i.default.pixiOverlay((function(e){var t=e.getScale();e.getContainer().children.forEach((function(e){return e.scale.set(1/t)})),e.getRenderer().render(e.getContainer())}),e);return t.addTo(T),A(t),p(null),g(null),function(){return e.removeChildren()}}),[T]),(0,u.useEffect)((function(){if(O&&t&&R){var e=O.utils,n=e.getContainer(),o=e.getRenderer(),r=e.latLngToLayerPoint,u=e.getScale();t.forEach((function(e){var t=e.id,o=e.iconColor,i=e.iconId,c=e.onClick,s=e.position,f=e.popup,d=e.tooltip,v=e.popupOpen,h=e.markerSpriteAnchor,m=i||o;if(l.resources["marker_"+m]&&l.resources["marker_"+m].texture){var C=l.resources["marker_"+m].texture;C.anchor={x:.5,y:1};var y=a.Sprite.from(C);h?y.anchor.set(h[0],h[1]):y.anchor.set(.5,1);var w=r(s);y.x=w.x,y.y=w.y,y.scale.set(1/u),v&&p({id:t,offset:[0,-35],position:s,content:f,onClick:c}),(f||c||d)&&(y.interactive=!0),(f||c)&&(y.on("mousedown",(function(){var e=0;y.on("mousemove",(function(){e++})),y.on("mouseup",(function(){e<2&&c&&c(t)}))})),y.on("touchstart",(function(){var e=0;y.on("touchmove",(function(){e++})),y.on("touchend",(function(){e<10&&c&&c(t)}))})),y.defaultCursor="pointer",y.buttonMode=!0),d&&(y.on("mouseover",(function(){g({id:t,offset:[0,-35],position:s,content:d})})),y.on("mouseout",(function(){g(null)}))),n.addChild(y)}})),o.render(n)}return function(){return O&&O.utils.getContainer().removeChildren()}}),[O,t,R]),(0,u.useEffect)((function(){S&&T.closePopup(S),!m||w&&d&&d.id===m.id||_(s(T,m))}),[m,d,T]),(0,u.useEffect)((function(){w&&T.closePopup(w),d&&k(s(T,d,{autoClose:!1},!0))}),[d,T]),null}}}]);