"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6706],{9889:(e,r,t)=>{t.d(r,{Q:()=>h});var n=t(2876),a=t(4296),i=t(6469),o=new a.Ae,h=function(){function e(e){this.renderer=e,e.extract=this}return e.prototype.image=function(e,r,t){var n=new Image;return n.src=this.base64(e,r,t),n},e.prototype.base64=function(e,r,t){return this.canvas(e).toDataURL(r,t)},e.prototype.canvas=function(r){var t,a,h,s=this.renderer,d=!1,u=!1;r&&(r instanceof i.TI?h=r:(h=this.renderer.generateTexture(r),u=!0)),h?(t=h.baseTexture.resolution,a=h.frame,d=!1,s.renderTexture.bind(h)):(t=this.renderer.resolution,d=!0,(a=o).width=this.renderer.width,a.height=this.renderer.height,s.renderTexture.bind(null));var c=Math.floor(a.width*t+1e-4),l=Math.floor(a.height*t+1e-4),g=new n.CanvasRenderTarget(c,l,1),v=new Uint8Array(4*c*l),x=s.gl;x.readPixels(a.x*t,a.y*t,c,l,x.RGBA,x.UNSIGNED_BYTE,v);var f=g.context.getImageData(0,0,c,l);if(e.arrayPostDivide(v,f.data),g.context.putImageData(f,0,0),d){var w=new n.CanvasRenderTarget(g.width,g.height,1);w.context.scale(1,-1),w.context.drawImage(g.canvas,0,-l),g.destroy(),g=w}return u&&h.destroy(!0),g.canvas},e.prototype.pixels=function(r){var t,n,a,h=this.renderer,s=!1;r&&(r instanceof i.TI?a=r:(a=this.renderer.generateTexture(r),s=!0)),a?(t=a.baseTexture.resolution,n=a.frame,h.renderTexture.bind(a)):(t=h.resolution,(n=o).width=h.width,n.height=h.height,h.renderTexture.bind(null));var d=n.width*t,u=n.height*t,c=new Uint8Array(4*d*u),l=h.gl;return l.readPixels(n.x*t,n.y*t,d,u,l.RGBA,l.UNSIGNED_BYTE,c),s&&a.destroy(!0),e.arrayPostDivide(c,c),c},e.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},e.arrayPostDivide=function(e,r){for(var t=0;t<e.length;t+=4){var n=r[t+3]=e[t+3];0!==n?(r[t]=Math.round(Math.min(255*e[t]/n,255)),r[t+1]=Math.round(Math.min(255*e[t+1]/n,255)),r[t+2]=Math.round(Math.min(255*e[t+2]/n,255))):(r[t]=e[t],r[t+1]=e[t+1],r[t+2]=e[t+2])}},e}()}}]);